<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LARP地圖搜索</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
            integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
            integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            crossorigin="anonymous"></script>
    <script src="../images/jquery.rwdImageMaps.js"></script>
    <script>
        $(document).ready(function (e) {
            $('img[usemap]').rwdImageMaps();
        });
    </script>
    <link rel="stylesheet" href="../images/rwd.css" type="text/css">
</head>
<body>
<h1 id="head">該裝置無法使用此網頁</h1>
<h1>你的小隊:<%= tname %>
    <button type="button" onclick="logout()">登出</button>
</h1>
<br>
<button><a href="/" style="color: black;text-decoration: none">搜查報告</a></button>
<button><a href="/sus" style="color: black;text-decoration: none">嫌疑犯</a></button>
<hr>
<img id="map" src="../images/map.jpg" usemap="#map" style="width: 100%;">
<map name="map">
    <area alt="建仁企業" title="建仁企業" onclick="JianFloor()" coords="706,1525,1791,2670" shape="rect">
    <area alt="咖啡廳" title="咖啡廳" onclick="cafe()" coords="56,1529,638,2075" shape="rect">
    <area alt="王葉的家" title="王葉的家" onclick="home()" coords="2384,140,3793,960" shape="rect">
    <area alt="救護車" title="救護車" onclick="ambulance()" coords="2344,1279,2637,1431" shape="rect">
    <area alt="全國電子" title="全國電子" onclick="elec()" coords="2427,1543,3096,2151" shape="rect">
</map>
<img id="elec" src="../images/elec.jpg" usemap="#elec" style="width: 100%;display: none">
<map name="elec">
    <area alt="電視" title="電視" onclick="tv()" coords="1437,1956,1932,2011,1932,2354,1433,2383" shape="poly">
    <area alt="路人" title="路人"
          coords="3190,2484,3212,2452,3244,2390,3309,2354,3371,2325,3440,2325,3508,2340,3566,2379,3591,2441,3606,2513,3617,2549,3682,2553,3703,2575,3718,2607,3725,2647,3736,2705,3736,2770,3729,2828,3729,2860,3718,2889,3183,2889,3179,2832,3179,2763,3176,2705,3176,2669,3172,2636,3150,2607,3147,2560,3161,2506"
          shape="poly">
</map>
<img id="tv" src="../images/tv.jpg" usemap="#tv" style="width: 100%;display: none">
<map name="tv">
    <area alt="電視" title="電視" coords="2,297,4087,2593" shape="rect">
</map>
<img id="ambulance" src="../images/ambulance.jpg" usemap="#ambulance" style="width: 100%;display: none">
<map name="ambulance">
    <area alt="天竺鼠車車" title="天竺鼠車車"
          coords="9,1494,2713,712,2695,662,2709,557,2684,405,2688,304,2655,213,2641,134,2612,58,2586,4,5,0"
          shape="poly">
    <area alt="葉麗" title="葉麗"
          coords="1379,2784,1386,2441,1404,2357,1437,2292,1585,2256,1600,2173,1636,2068,1563,2057,1422,2017,1383,1981,1415,1920,1455,1902,1502,1884,1589,1855,1668,1848,1816,1858,1947,1880,2037,1895,2167,1942,2250,1985,2308,2017,2344,2046,2373,2083,2294,2090,2257,2087,2192,2126,2138,2159,2268,2134,2330,2181,2402,2271,2398,2322,2398,2408,2362,2455,2355,2510,2362,2596,2359,2709,2344,2810,2330,2889,1415,2886"
          shape="poly">
    <area alt="王建仁" title="王建仁"
          coords="2767,2463,2601,2260,2521,2097,2471,1974,2464,1917,2586,1815,2539,1682,2521,1602,2514,1541,2514,1497,2558,1447,2586,1381,2688,1320,2789,1258,2854,1251,2937,1240,3006,1251,3071,1284,3121,1302,3150,1331,3179,1334,3230,1349,3270,1374,3309,1407,3346,1443,3367,1508,3367,1562,3364,1598,3400,1638,3436,1707,3468,1765,3512,1837,3552,1924,3581,1985"
          shape="poly">
</map>
<img id="cafe" src="../images/cafe.jpg" usemap="#cafe" style="width: 100%;display: none">
<map name="cafe">
    <area alt="牆上的照片" title="牆上的照片" coords="2670,365,3085,850" shape="rect">
    <area alt="保險" title="保險" onclick="insurance()" coords="2482,1341,381" shape="circle">
    <area alt="桌子" title="桌子" onclick="izcc7122()" coords="490,2517,329" shape="circle">
    <area alt="椅子" title="椅子" coords="2124,2231,393" shape="circle">
</map>
<img id="jizz7122" src="../images/jizz7122.jpg" usemap="#jizz7122" style="width: 100%;display: none">
<map name="jizz7122">
    <area alt="JIZZ7122" title="JIZZ7122" coords="1983,1750,755" shape="circle">
</map>
<img id="insurance" src="../images/insurance.jpg" usemap="#insurance" style="width: 100%;display: none">
<map name="insurance">
    <area alt="保險" title="保險" coords="1466,1199,1246" shape="circle">
</map>
<img id="JianFloor" src="../images/JianFloor.jpg" usemap="#JianFloor" style="width: 100%;display: none">
<map name="JianFloor">
    <area alt="葉跟王的辦公室" title="葉跟王的辦公室" onclick="bossoffice()" coords="1527,0,3013,575" shape="rect">
    <area alt="三樓廁所" title="三樓廁所" coords="3024,0,3295,575" shape="rect">
    <area alt="員工辦公室" title="員工辦公室" onclick="office()" coords="1137,593,3013,1367" shape="rect">
    <area alt="二樓廁所" title="二樓廁所" coords="3031,597,3295,1360" shape="rect">
    <area alt="警衛室" title="警衛室" onclick="security()" coords="1140,1776,1444,2173" shape="rect">
    <area alt="一樓廁所" title="一樓廁所" coords="3027,1374,3291,2173" shape="rect">
    <area alt="發表會場" title="發表會場" coords="1137,1374,3013,1374,3017,2173,1451,2173,1451,1772,1137,1761" shape="poly">
    <area alt="倉庫" title="倉庫" onclick="storage()" coords="1140,2191,3299,2889" shape="rect">
    <area alt="信箱" title="信箱" onclick="mailbox()" coords="533,1917,739,2184" shape="rect">
</map>
<img id="storage" src="../images/storage.JPG" usemap="#storage" style="width: 100%;display: none">
<map name="storage">
    <area alt="99台美好幻想世界" title="99台美好幻想世界" coords="4,1,786,597" shape="rect">
</map>
<img id="home" src="../images/home.jpg" usemap="#home" style="width: 100%;display: none">
<map name="home">
    <area alt="王葉的家" title="王葉的家" coords="2420,839,3772,2893" shape="rect">
    <area alt="鄰居" title="鄰居" data-toggle="modal" data-target="#neighbor"
          coords="497,2889,1339,2889,1365,2857,1368,2799,1368,2752,1361,2716,1361,2690,1368,2662,1368,2604,1372,2575,1379,2553,1379,2531,1379,2510,1401,2445,1412,2423,1426,2387,1426,2354,1422,2296,1325,2177,1278,2101,1263,2087,1224,2058,1184,2036,1198,1906,1155,1873,1122,1866,1097,1859,1068,1859,1039,1859,1018,1830,1000,1812,913,1826,887,1837,826,1826,786,1833,768,1852,746,1880,728,1899,707,1924,685,1935,652,1967,631,1996,609,2011,573,2018,548,2040,537,2065,555,2134,533,2144,497,2191,512,2231,569,2347,522,2347,486,2383,479,2495,479,2604,475,2658,472,2738,465,2774,465,2817,472,2871"
          shape="poly">
</map>
<img id="security" src="../images/security.jpg" usemap="#security" style="width: 100%;display: none">
<map name="security">
    <area alt="監視器" title="監視器" onclick="cctv()" coords="2341,879,3855,1942" shape="rect">
</map>
<img id="cctv" src="../images/cctv.jpg" usemap="#cctv" style="width: 100%;display: none">
<map name="cctv">
</map>
<img id="mailbox" src="../images/mailbox.jpg" usemap="#mailbox" style="width: 100%;display: none">
<map name="mailbox">
    <area target="" alt="信" title="信" onclick="mail()" coords="2001,1613,1256" shape="circle">
</map>
<img id="mail" src="../images/mail.jpg" usemap="#mail" style="width: 100%;display: none">
<map name="mail">
    <area alt="信" title="信" href="" coords="2001,1613,1256" shape="circle">
</map>
<img id="office" src="../images/office.jpg" usemap="#office" style="width: 100%;display: none">
<map name="office">
</map>
<img id="bossoffice" src="../images/bossoffice.jpg" usemap="#bossoffice" style="width: 100%;display: none">
<map name="bossoffice">
</map>
<button id="back" onclick="back()" style="display: none">返回</button>
<div id="map-model">

</div>
</body>
<script>
    let now = "map";
    const hint = <%- JSON.stringify(hint) %>;
    const hintid = <%- JSON.stringify(hintid) %>;

    async function logout() {
        await $.ajax({
            url: '/logout',
            type: 'POST',
            cache: false,
            data: false,
            success: function (data) {
                console.log('Success!')
            },
            error: function (jqXHR, textStatus, err) {
                console.log('text status ' + textStatus + ', err ' + err)
            }
        })
        location.reload();
    }

    function map() {
        document.getElementById('elec').style.display = 'none';
        document.getElementById('ambulance').style.display = 'none';
        document.getElementById('cafe').style.display = 'none';
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('home').style.display = 'none';
        document.getElementById('map').style.display = 'block';
        document.getElementById('back').style.display = 'none';
        now = "map";
    }

    function elec() {
        document.getElementById('map').style.display = 'none';
        document.getElementById('tv').style.display = 'none';
        document.getElementById('elec').style.display = 'block';
        document.getElementById('back').style.display = 'block';
        now = "elec";
    }

    function tv() {
        document.getElementById('elec').style.display = 'none';
        document.getElementById('tv').style.display = 'block';
        now = "tv";
    }

    function ambulance() {
        document.getElementById('map').style.display = 'none';
        document.getElementById('ambulance').style.display = 'block';
        document.getElementById('back').style.display = 'block';
        now = "ambulance";
    }

    function cafe() {
        document.getElementById('map').style.display = 'none';
        document.getElementById('jizz7122').style.display = 'none';
        document.getElementById('insurance').style.display = 'none';
        document.getElementById('cafe').style.display = 'block';
        document.getElementById('back').style.display = 'block';
        now = "cafe";
    }

    function izcc7122() {
        document.getElementById('cafe').style.display = 'none';
        document.getElementById('jizz7122').style.display = 'block';
        now = "jizz7122";
    }

    function insurance() {
        document.getElementById('cafe').style.display = 'none';
        document.getElementById('insurance').style.display = 'block';
        now = "insurance";
    }

    function JianFloor() {
        document.getElementById('map').style.display = 'none';
        document.getElementById('storage').style.display = 'none';
        document.getElementById('security').style.display = 'none';
        document.getElementById('mailbox').style.display = 'none';
        document.getElementById('office').style.display = 'none';
        document.getElementById('bossoffice').style.display = 'none';
        document.getElementById('JianFloor').style.display = 'block';
        document.getElementById('back').style.display = 'block';
        now = "JianFloor";
    }

    function storage() {
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('storage').style.display = 'block';
        now = "storage";
    }

    function home() {
        document.getElementById('map').style.display = 'none';
        document.getElementById('home').style.display = 'block';
        document.getElementById('back').style.display = 'block';
        now = "home";
    }

    function security() {
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('cctv').style.display = 'none';
        document.getElementById('security').style.display = 'block';
        now = "security";
    }
    function cctv() {
        document.getElementById('security').style.display = 'none';
        document.getElementById('cctv').style.display = 'block';
        now = "cctv";
    }

    function mailbox() {
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('mail').style.display = 'none';
        document.getElementById('mailbox').style.display = 'block';
        now = "mailbox";
    }

    function mail() {
        document.getElementById('mailbox').style.display = 'none';
        document.getElementById('mail').style.display = 'block';
        now = "mail";
    }

    function office() {
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('office').style.display = 'block';
        now = "office";
    }

    function bossoffice() {
        document.getElementById('JianFloor').style.display = 'none';
        document.getElementById('bossoffice').style.display = 'block';
        now = "bossoffice";
    }

    function back() {
        switch (now) {
            case "elec":
                map();
                break;
            case "tv":
                elec();
                break;
            case "ambulance":
                map();
                break;
            case "cafe":
                map();
                break;
            case "jizz7122":
                cafe();
                break;
            case "insurance":
                cafe();
                break;
            case "JianFloor":
                map();
                break;
            case "storage":
                JianFloor();
                break;
            case "home":
                map();
                break;
            case "security":
                JianFloor();
                break;
            case "cctv":
                security();
                break;
            case "mailbox":
                JianFloor();
                break;
            case "mail":
                mailbox();
                break;
            case "office":
                JianFloor();
                break;
            case "bossoffice":
                JianFloor();
                break;
        }
    }


    for (let i = 0; i < hint.length; i++) {
        $('#map-model').append(`<div class="modal fade" id="${hintid[i]}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Hint!</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>${hint[i]}</p>
                </div>
        </div>
    </div>
</div>
`)
    }
</script>
</html>